<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PartoMat - Avtomobil hissələri axtarışı</title>
    <link rel="stylesheet" href="styles/main.css?v=1.0.2">
    <link rel="stylesheet" href="styles/components.css?v=1.0.4">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <!-- Ana tətbiq konteyner -->
        <div id="loading" class="loading-screen">
            <div class="loading-logo">
                <div class="logo-circle">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
            <div class="loading-text">PartoMat yüklənir...</div>
        </div>

        <!-- Header komponenti -->
        <header id="header" class="app-header" style="display: none;">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-circle">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <span class="app-name">PartoMat</span>
                </div>
                <div class="header-actions">
                    <button id="notificationBtn" class="icon-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span id="notificationBadge" class="notification-badge" style="display: none;">3</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Əsas kontent konteyner -->
        <main id="mainContent" class="main-content" style="display: none;">
            <!-- Səhifələr burada JavaScript tərəfindən yüklənəcək -->
        </main>

        <!-- Bottom navigation -->
        <nav id="bottomNav" class="bottom-nav" style="display: none;">
            <button class="nav-item active" data-page="home">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Axtar</span>
            </button>
            <button class="nav-item" data-page="history">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 8V12L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Tarixçə</span>
            </button>
            <button class="nav-item" data-page="messages">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 11.5C21.0034 12.8199 20.6951 14.1219 20.1 15.3C19.3944 16.7118 18.3098 17.8992 16.9674 18.7293C15.6251 19.5594 14.0782 19.9994 12.5 20C11.1801 20.0035 9.87812 19.6951 8.7 19.1L3 21L4.9 15.3C4.30493 14.1219 3.99656 12.8199 4 11.5C4.00061 9.92179 4.44061 8.37488 5.27072 7.03258C6.10083 5.69028 7.28825 4.6056 8.7 3.90003C9.87812 3.30496 11.1801 2.99659 12.5 3.00003H13C15.0843 3.11502 17.053 3.99479 18.5291 5.47089C20.0052 6.94699 20.885 8.91568 21 11V11.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Mesajlar</span>
            </button>
            <button class="nav-item" data-page="profile">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Profil</span>
            </button>
        </nav>
    </div>

    <!-- JavaScript fayllarını yükləyin -->

    <!-- Firebase SDKs (Compat version for global firebase object) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-functions-compat.js"></script>
    <!-- <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script> -->

    <!-- Firebase Configuration & Initialization -->
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDYeGcp_glntvn70TcCj6Ho833497cJCeI",
        authDomain: "partomatminiapp.firebaseapp.com",
        projectId: "partomatminiapp",
        storageBucket: "partomatminiapp.firebasestorage.app",
        messagingSenderId: "1064825065831",
        appId: "1:1064825065831:web:e3ddaeaf34b61fed8a5fc2",
        measurementId: "G-W5V7LWBJLG"
      };

      // Initialize Firebase using the global firebase object provided by compat scripts
      let firebaseApp;
      let functions;
      try {
          // Check if firebase is available globally
          if (typeof firebase === 'undefined') {
              throw new Error('Firebase SDK (compat) not loaded.');
          }
          firebaseApp = firebase.initializeApp(firebaseConfig);
          functions = firebase.functions(); // Use firebase.functions() with compat
          // Optional: Set region if your functions are not in us-central1
          // firebase.functions().useFunctionsEmulator('http://localhost:5001'); // Emulator syntax for compat
          console.log("Firebase initialized successfully (compat).")
      } catch (e) {
          console.error("Firebase initialization failed:", e);
          document.body.innerHTML = '<div style="padding:20px; text-align:center; color:red;">Firebase konfiqurasiya xətası. Tətbiq işləməyəcək.</div>';
      }
    </script>

    <!-- Your App Scripts (ensure these load AFTER firebase init) -->
    <script src="services/telegram.js?v=1.0.3"></script>
    <!-- <script src="services/firebase.js?v=1.0.0"></script> --> 
    <!-- <script src="services/api.js?v=1.0.0"></script> --> 
    
    <script src="components/header.js?v=1.0.0"></script>
    <script src="components/vehicle-selector.js?v=1.0.0"></script>
    <script src="components/part-form.js?v=1.0.2"></script>
    <script src="components/response-card.js?v=1.0.2"></script>
    
    <script src="pages/home.js?v=1.0.4"></script>
    <script src="pages/search.js?v=1.0.2"></script>
    <script src="pages/query.js?v=1.0.2"></script>
    <script src="pages/responses.js?v=1.0.0"></script>
    <script src="pages/profile.js?v=1.0.0"></script>
    <script src="pages/add-vehicle.js?v=1.0.0"></script>
    
    <script src="app.js?v=1.0.0"></script>
</body>
</html>
